<!DOCTYPE html>
<html lang="en"><head>
<script src="study-design-slides_files/libs/clipboard/clipboard.min.js"></script>
<script src="study-design-slides_files/libs/quarto-html/tabby.min.js"></script>
<script src="study-design-slides_files/libs/quarto-html/popper.min.js"></script>
<script src="study-design-slides_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="study-design-slides_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="study-design-slides_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="study-design-slides_files/libs/quarto-html/quarto-syntax-highlighting-dark-2fef5ea3f8957b3e4ecc936fc74692ca.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.32">

  <meta name="author" content="EDA for Machine Learning">
  <title>Sampling and Study Design</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="study-design-slides_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="study-design-slides_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="study-design-slides_files/libs/revealjs/dist/theme/quarto-0144685976e4030202a49018b3418199.css">
  <link href="study-design-slides_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="study-design-slides_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="study-design-slides_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="study-design-slides_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Sampling and Study Design</h1>
  <p class="subtitle">Why <em>how</em> you collect data matters more than <em>how much</em></p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
EDA for Machine Learning 
</div>
</div>
</div>

</section><section id="TOC">
<nav role="doc-toc"> 
<h2 id="toc-title">Chapter 5</h2>
<ul>
<li><a href="#/opening" id="/toc-opening">Opening</a></li>
<li><a href="#/observational-studies" id="/toc-observational-studies">Observational Studies</a></li>
<li><a href="#/experimental-studies" id="/toc-experimental-studies">Experimental Studies</a></li>
<li><a href="#/measurement-and-uncertainty" id="/toc-measurement-and-uncertainty">Measurement and Uncertainty</a></li>
<li><a href="#/the-role-of-eda" id="/toc-the-role-of-eda">The Role of EDA</a></li>
<li><a href="#/synthesis" id="/toc-synthesis">Synthesis</a></li>
<li><a href="#/exercises" id="/toc-exercises">Exercises</a></li>
<li><a href="#/appendix-instructor-notes" id="/toc-appendix-instructor-notes">Appendix: Instructor Notes</a></li>
</ul>
</nav>
</section>
<section>
<section id="opening" class="title-slide slide level1 center">
<h1>Opening</h1>

</section>
<section id="the-big-data-paradox" class="slide level2">
<h2>The Big Data Paradox</h2>
<p>If we have millions of records, why does sampling theory matter?</p>
<div class="fragment">
<p><strong>Answer</strong>: As soon as you ask “what would happen if…” you’re generalizing beyond your data.</p>
</div>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>ML Connection</strong></p>
</div>
<div class="callout-content">
<p>Training data should be a <em>sample</em> from the deployment environment.</p>
</div>
</div>
</div>
<aside class="notes">
<p>This is the key insight for a data science audience. Even “big data” is a sample from some larger process. The question is whether it’s a <em>representative</em> sample.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="chapter-roadmap" class="slide level2">
<h2>Chapter Roadmap</h2>
<ol type="1">
<li><strong>Observational studies</strong>: Learning from data you didn’t generate</li>
<li><strong>Experimental studies</strong>: Learning from conditions you control<br>
</li>
<li><strong>Measurement</strong>: Bias, chance error, and uncertainty</li>
<li><strong>The role of EDA</strong>: Bridging design and modeling</li>
</ol>
<aside class="notes">
<p>Instructor note: This chapter draws heavily from Freedman, Pisani, and Purves (FPP). The examples are classic but the lessons are timeless.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="observational-studies" class="title-slide slide level1 center">
<h1>Observational Studies</h1>

</section>
<section id="literary-digest-1936-the-largest-poll-in-history" class="slide level2">
<h2>Literary Digest, 1936: The Largest Poll in History</h2>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;">Source</th>
<th style="text-align: right;">FDR Predicted %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Digest</td>
<td style="text-align: right;">43</td>
</tr>
<tr class="even">
<td style="text-align: left;">Gallup re Digest</td>
<td style="text-align: right;">44</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Gallup re election</td>
<td style="text-align: right;">56</td>
</tr>
<tr class="even">
<td style="text-align: left;">election result</td>
<td style="text-align: right;">62</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="fragment">
<p><strong>The Digest’s error of 19 percentage points is the largest in polling history.</strong></p>
<aside class="notes">
<p>Pause here to let the numbers sink in. 2.4 million respondents got it catastrophically wrong. 50,000 got it roughly right. This sets up the key lesson.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="what-went-wrong" class="slide level2">
<h2>What Went Wrong?</h2>
<p>The Digest sampled from:</p>
<ul>
<li>Automobile registrations</li>
<li>Telephone directories</li>
<li>Magazine subscription lists</li>
</ul>
<div class="fragment">
<p>In 1936, these <strong>skewed wealthy</strong>—and wealthy voters favored Landon.</p>
</div>
<div class="fragment">
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Selection Bias</strong></p>
</div>
<div class="callout-content">
<p>The sampling frame excluded the population of interest.</p>
</div>
</div>
</div>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>ML Connection</strong></p>
</div>
<div class="callout-content">
<p>If your training data excludes a subpopulation, your model won’t serve them.</p>
</div>
</div>
</div>
</div>
</section>
<section id="truman-vs.-dewey-1948" class="slide level2">
<h2>Truman vs.&nbsp;Dewey, 1948:</h2>
<p>Quota Sampling Fails</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;">source</th>
<th style="text-align: right;">Truman</th>
<th style="text-align: right;">Dewey</th>
<th style="text-align: right;">Thurmond</th>
<th style="text-align: right;">Wallace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Crossley</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">Gallup</td>
<td style="text-align: right;">44</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Roper</td>
<td style="text-align: right;">38</td>
<td style="text-align: right;">53</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">election result</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="fragment">
<p>All three major polls predicted Dewey by 5+ points. All three were wrong.</p>
<aside class="notes">
<p>This is the famous “Dewey Defeats Truman” headline moment. Ask the class if they’ve seen the photo of Truman holding that newspaper.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="quota-sampling-the-problem" class="slide level2">
<h2>Quota Sampling: The Problem</h2>
<p><strong>Quota sampling</strong>: Match sample demographics to population demographics.</p>
<ul>
<li>Interviewers given quotas: X women, Y employed, Z from each region…</li>
<li>Otherwise free to choose subjects</li>
</ul>
<div class="fragment">
<p><strong>The hidden bias</strong>: Interviewers chose “convenient” subjects within quotas—who tended to vote Republican.</p>
<aside class="notes">
<p>The key insight is that there are many factors influencing voting, and you can’t control for all of them with quotas. Interviewers unconsciously selected people who were easier to interview.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="probability-sampling" class="slide level2">
<h2>Probability Sampling</h2>
<p><strong>Key insight</strong>: Too many known and unknown factors to control them all.</p>
<div class="fragment">
<p><strong>Solution</strong>: Let <em>chance</em> create a representative sample.</p>
</div>
<div class="fragment">
<p><strong>Simple random sampling</strong>: Every individual has a known, equal probability of selection.</p>
</div>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Hallmark of Probability Sampling</strong></p>
</div>
<div class="callout-content">
<p>The probability of including any given individual can be calculated <em>in advance</em>.</p>
</div>
</div>
</div>
</div>
</section>
<section id="practical-probability-sampling" class="slide level2">
<h2>Practical Probability Sampling</h2>
<p>Simple random sampling is often impractical (cost, logistics).</p>
<p><strong>Multi-stage cluster sampling</strong>: Randomly select regions → towns → precincts → households</p>
<div class="fragment">
<p><strong>Key features preserved</strong>:</p>
<ul>
<li>No interviewer discretion in subject selection</li>
<li>Prescribed procedure involving planned use of chance</li>
</ul>
</div>
</section>
<section id="post-1948-probability-sampling-works" class="slide level2">
<h2>Post-1948: Probability Sampling Works</h2>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: right;">Year</th>
<th style="text-align: right;">Sample Size</th>
<th style="text-align: left;">Winner</th>
<th style="text-align: right;">Gallup %</th>
<th style="text-align: right;">Actual %</th>
<th style="text-align: right;">Error</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1952</td>
<td style="text-align: right;">5385</td>
<td style="text-align: left;">Eisenhower</td>
<td style="text-align: right;">51</td>
<td style="text-align: right;">55.1</td>
<td style="text-align: right;">-4.1</td>
</tr>
<tr class="even">
<td style="text-align: right;">1960</td>
<td style="text-align: right;">8015</td>
<td style="text-align: left;">Kennedy</td>
<td style="text-align: right;">51</td>
<td style="text-align: right;">49.7</td>
<td style="text-align: right;">1.3</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1976</td>
<td style="text-align: right;">3439</td>
<td style="text-align: left;">Carter</td>
<td style="text-align: right;">48</td>
<td style="text-align: right;">50.1</td>
<td style="text-align: right;">-2.1</td>
</tr>
<tr class="even">
<td style="text-align: right;">1984</td>
<td style="text-align: right;">3456</td>
<td style="text-align: left;">Reagan</td>
<td style="text-align: right;">59</td>
<td style="text-align: right;">58.8</td>
<td style="text-align: right;">0.2</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2000</td>
<td style="text-align: right;">3571</td>
<td style="text-align: left;">Bush</td>
<td style="text-align: right;">48</td>
<td style="text-align: right;">47.9</td>
<td style="text-align: right;">0.1</td>
</tr>
<tr class="even">
<td style="text-align: right;">2004</td>
<td style="text-align: right;">2014</td>
<td style="text-align: left;">Bush</td>
<td style="text-align: right;">49</td>
<td style="text-align: right;">50.6</td>
<td style="text-align: right;">-1.6</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Errors mostly within ±3 percentage points—with samples of 2,000-8,000, not millions.</p>
<aside class="notes">
<p>This is a subset of the full table in the textbook. The point is the contrast with the Literary Digest: <em>smaller</em> samples with <em>probability</em> sampling beat <em>huge</em> samples with biased sampling.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="uc-berkeley-admissions-simpsons-paradox" class="slide level2">
<h2>UC Berkeley Admissions: Simpson’s Paradox</h2>
<p>In the 1970s, concern arose that graduate admissions were biased against women.</p>
<div class="fragment">
<p><strong>Overall admission rate</strong>: Men 44%, Women 35%</p>
</div>
<div class="fragment">
<p>But department-by-department analysis told a different story…</p>
<aside class="notes">
<p>This is one of the most famous examples of Simpson’s Paradox. Build the suspense before revealing the twist.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="the-paradox-revealed" class="slide level2">
<h2>The Paradox Revealed</h2>
<p>Most departments admitted a <strong>higher</strong> percentage of female applicants.</p>
<div class="fragment">
<p><strong>What happened?</strong> Women applied disproportionately to departments with lower overall admission rates.</p>
</div>
<div class="fragment">
<p>Aggregating across departments <strong>reversed</strong> the apparent pattern.</p>
</div>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>ML Connection</strong></p>
</div>
<div class="callout-content">
<p>A feature (gender) appeared predictive of the outcome (admission) only because both were associated with a <strong>confounder</strong> (department choice). Stratify by potential confounders.</p>
</div>
</div>
</div>
</div>
</section>
<section id="uc-berkeley-the-sampling-lesson" class="slide level2">
<h2>UC Berkeley: The Sampling Lesson</h2>
<ul>
<li>Data included <em>all</em> applicants in 1973 (not a sample)</li>
<li>Standard statistical formulas assume probability sampling</li>
<li>If data aren’t from a probability sample, <strong>standard errors don’t apply</strong></li>
</ul>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>ML Connection</strong></p>
</div>
<div class="callout-content">
<p>Your test set is a sample; your deployment data may not be from the same distribution.</p>
</div>
</div>
</div>
<aside class="notes">
<p>This is a subtle but important point. Many ML practitioners compute confidence intervals on test metrics, but if the test set isn’t representative of deployment, those intervals are meaningless.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section></section>
<section>
<section id="experimental-studies" class="title-slide slide level1 center">
<h1>Experimental Studies</h1>

</section>
<section id="why-experiment" class="slide level2">
<h2>Why Experiment?</h2>
<p><strong>Observational data</strong>: Subjects choose their own “treatment”</p>
<div class="fragment">
<p><strong>Confounding</strong>: Factors that affect both treatment choice <em>and</em> outcome</p>
</div>
<div class="fragment">
<p><strong>Experiment</strong>: Researcher assigns treatment, <em>breaking</em> confounding</p>
<aside class="notes">
<p>Draw a simple DAG on the board if you have time: Confounder → Treatment → Outcome, with Confounder also → Outcome. Randomization breaks the Confounder → Treatment arrow.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="salk-vaccine-trial-nfip-design" class="slide level2">
<h2>Salk Vaccine Trial: NFIP Design</h2>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;">Grade</th>
<th style="text-align: left;">Group</th>
<th style="text-align: right;">Size</th>
<th style="text-align: right;">Polio Rate (per 100k)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">2</td>
<td style="text-align: left;">treatment</td>
<td style="text-align: right;">225000</td>
<td style="text-align: right;">25</td>
</tr>
<tr class="even">
<td style="text-align: left;">1, 3</td>
<td style="text-align: left;">control</td>
<td style="text-align: right;">725000</td>
<td style="text-align: right;">54</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2</td>
<td style="text-align: left;">no_consent</td>
<td style="text-align: right;">125000</td>
<td style="text-align: right;">44</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="fragment">
<p><strong>Problems</strong>:</p>
<ul>
<li>Grade might affect polio transmission</li>
<li>Consent might be confounded with risk factors</li>
</ul>
</div>
</section>
<section id="salk-vaccine-trial-double-blind-design" class="slide level2">
<h2>Salk Vaccine Trial: Double-Blind Design</h2>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;">Group</th>
<th style="text-align: right;">Size</th>
<th style="text-align: right;">Polio Rate (per 100k)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">treatment</td>
<td style="text-align: right;">200000</td>
<td style="text-align: right;">28</td>
</tr>
<tr class="even">
<td style="text-align: left;">control</td>
<td style="text-align: right;">200000</td>
<td style="text-align: right;">71</td>
</tr>
<tr class="odd">
<td style="text-align: left;">no_consent</td>
<td style="text-align: right;">350000</td>
<td style="text-align: right;">46</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="fragment">
<p><strong>Key insight</strong>: Non-consent group had <em>lower</em> rate than placebo group.</p>
<p>Consent itself was confounded with risk!</p>
<aside class="notes">
<p>Higher SES parents were more likely to consent, but their children were at higher risk (less early exposure → less natural immunity). This is a beautiful example of confounding that only became visible with proper randomization.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="double-blind-design-why-it-matters" class="slide level2">
<h2>Double-Blind Design: Why It Matters</h2>
<p><strong>Randomization</strong>: Consenting parents’ children assigned to vaccine <em>or placebo</em> by chance</p>
<p><strong>Blinding</strong>: Neither parents, doctors, nor evaluators knew assignment</p>
<div class="fragment">
<p>This eliminates:</p>
<ul>
<li>Selection bias in treatment assignment</li>
<li>Unconscious bias in outcome measurement</li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>ML Connection</strong></p>
</div>
<div class="callout-content">
<p>In supervised ML, annotators should not have access to information that could bias their labels. The NFIP’s initial design mirrors <em>label leakage</em>.</p>
</div>
</div>
</div>
</div>
</section>
<section id="the-portacaval-shunt-design-determines-conclusions" class="slide level2">
<h2>The Portacaval Shunt: Design Determines Conclusions</h2>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;">Study Design</th>
<th style="text-align: right;">Marked Enthusiasm</th>
<th style="text-align: right;">Moderate</th>
<th style="text-align: right;">None</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">no controls</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">controls not randomized</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">randomized controlled</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="fragment">
<p>The <strong>same surgery</strong> looked beneficial or useless depending on study design.</p>
<aside class="notes">
<p>This is one of the most striking tables in all of statistics. 75% of uncontrolled studies were enthusiastic; 0% of randomized studies were. The surgery doesn’t work, but bad study design made it look like it did.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="the-mechanism-of-bias" class="slide level2">
<h2>The Mechanism of Bias</h2>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;">Design</th>
<th style="text-align: right;">Surgery Survival %</th>
<th style="text-align: right;">Control Survival %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">randomized</td>
<td style="text-align: right;">60</td>
<td style="text-align: right;">60</td>
</tr>
<tr class="even">
<td style="text-align: left;">not randomized</td>
<td style="text-align: right;">60</td>
<td style="text-align: right;">45</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="fragment">
<p>Surgery patients: ~60% survival in both study types</p>
<p>Control patients: 60% (randomized) vs 45% (non-randomized)</p>
</div>
<div class="fragment">
<p><strong>Non-randomized studies used sicker patients as controls.</strong></p>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>ML Connection</strong></p>
</div>
<div class="callout-content">
<p>Evaluating a model on a non-exchangeable test set overstates performance. Randomized train/test splits guard against this bias.</p>
</div>
</div>
</div>
</div>
</section>
<section id="experimental-design-principles" class="slide level2">
<h2>Experimental Design Principles</h2>
<ol type="1">
<li><strong>Randomization</strong>: Breaks confounding</li>
<li><strong>Control group</strong>: Provides counterfactual<br>
</li>
<li><strong>Blinding</strong>: Prevents unconscious bias in measurement</li>
</ol>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>ML Connection</strong></p>
</div>
<div class="callout-content">
<p>A/B tests are randomized controlled experiments. Observational “causal” claims require strong assumptions.</p>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="measurement-and-uncertainty" class="title-slide slide level1 center">
<h1>Measurement and Uncertainty</h1>

</section>
<section id="nb10-precision-measurement" class="slide level2">
<h2>NB10: Precision Measurement</h2>
<p><strong>NB10</strong>: A standard weight, nominally 10 grams</p>
<p><strong>Study</strong>: 100 measurements under identical conditions at the National Bureau of Standards</p>

<img data-src="study-design-slides_files/figure-revealjs/fig-NB10-1.png" id="fig-NB10" width="960" class="r-stretch quarto-figure-center"><p class="caption">
Figure&nbsp;1
</p></section>
<section id="bias-vs.-chance-error" class="slide level2">
<h2>Bias vs.&nbsp;Chance Error</h2>
<p>Each measurement = <strong>true value</strong> + <strong>bias</strong> + <strong>chance error</strong></p>
<div class="fragment">
<ul>
<li><strong>Chance error</strong>: Varies randomly, averages toward zero</li>
<li><strong>Bias</strong>: Systematic, does <em>not</em> average out</li>
</ul>
</div>
<div class="fragment">
<p>NB10 is <strong>biased</strong>: It weighs ~405 μg less than 10g</p>
</div>
<div class="fragment">
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>ML Connection</strong></p>
</div>
<div class="callout-content">
<p>Model error = bias + variance. EDA reveals both.</p>
</div>
</div>
</div>
</div>
</section>
<section id="how-accurate-is-the-sample-average" class="slide level2">
<h2>How Accurate is the Sample Average?</h2>
<p><span class="math display">\[\text{SE of mean} = \frac{\text{SD}}{\sqrt{n}}\]</span></p>
<div class="fragment">
<p>For NB10:</p>
<p><span class="math display">\[\text{SE} = \frac{6.5}{\sqrt{100}} = 0.65 \text{ micrograms}\]</span></p>
</div>
<div class="fragment">
<p>Our estimate of 405 μg is probably within ~2 μg of the true value.</p>
</div>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Key Insight</strong></p>
</div>
<div class="callout-content">
<p>Uncertainty shrinks with <span class="math inline">\(\sqrt{n}\)</span>, not <span class="math inline">\(n\)</span>. Precision and accuracy are distinct.</p>
</div>
</div>
</div>
</div>
</section>
<section id="outliers-and-non-normality" class="slide level2">
<h2>Outliers and Non-Normality</h2>

<img data-src="study-design-slides_files/figure-revealjs/fig-NB10-zscore-1.png" id="fig-NB10-zscore" width="960" class="r-stretch quarto-figure-center"><p class="caption">
Figure&nbsp;2
</p><p>Measurements at z ≈ ±5 would be &lt; 1 in a million under normality.</p>
<p><strong>Even careful measurement processes produce non-normal tails.</strong></p>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>ML Connection</strong></p>
</div>
<div class="callout-content">
<p>Don’t assume normality. <strong>Look at your data.</strong></p>
</div>
</div>
</div>
</section></section>
<section>
<section id="the-role-of-eda" class="title-slide slide level1 center">
<h1>The Role of EDA</h1>

</section>
<section id="eda-bridges-design-and-modeling" class="slide level2">
<h2>EDA Bridges Design and Modeling</h2>
<p><strong>Study design</strong> determines what data <em>could</em> be collected.</p>
<div class="fragment">
<p><strong>EDA</strong> reveals what was <em>actually</em> collected.</p>
</div>
<div class="fragment">
<p>EDA answers:</p>
<ul>
<li>Does the feature distribution match deployment expectations?</li>
<li>Are there systematic patterns in missing data?</li>
<li>Do labels exhibit expected reliability?</li>
<li>Are there outliers warranting investigation?</li>
</ul>
<aside class="notes">
<p>This is the bridge to the rest of the course. Study design sets intentions; EDA verifies whether those intentions were achieved.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="the-bottom-line" class="slide level2">
<h2>The Bottom Line</h2>
<p>No algorithm can overcome fundamentally flawed data collection.</p>
<div class="fragment">
<p><strong>EDA is the diagnostic step that reveals whether data support the intended use.</strong></p>
</div>
<div class="fragment">
<p>The examples in this chapter—from the <em>Literary Digest</em> poll to the NB10 measurements—show that study design flaws are often invisible until the data are examined.</p>
</div>
</section></section>
<section>
<section id="synthesis" class="title-slide slide level1 center">
<h1>Synthesis</h1>

</section>
<section id="key-takeaways" class="slide level2">
<h2>Key Takeaways</h2>
<ol type="1">
<li><p><strong>How data are collected determines what conclusions are valid</strong></p></li>
<li><p>Sample size without representative sampling is worthless</p></li>
<li><p>Observational data cannot establish causation without strong assumptions</p></li>
<li><p>Randomized experiments are the gold standard for causal claims</p></li>
<li><p><strong>All estimates have uncertainty—quantify it</strong></p></li>
</ol>
</section>
<section id="key-concepts" class="slide level2">
<h2>Key Concepts</h2>
<table class="caption-top">
<thead>
<tr class="header">
<th>Concept</th>
<th>Definition</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Selection bias</td>
<td>Sample systematically differs from population</td>
</tr>
<tr class="even">
<td>Confounding</td>
<td>Third variable creates spurious association</td>
</tr>
<tr class="odd">
<td>Randomization</td>
<td>Assignment by chance mechanism</td>
</tr>
<tr class="even">
<td>Double-blind</td>
<td>Neither subject nor evaluator knows assignment</td>
</tr>
<tr class="odd">
<td>Standard error</td>
<td>SD of a sample statistic: <span class="math inline">\(\sigma / \sqrt{n}\)</span></td>
</tr>
</tbody>
</table>
</section>
<section id="looking-ahead-ml-implications" class="slide level2">
<h2>Looking Ahead: ML Implications</h2>
<ul>
<li><p><strong>Train/validation/test splits</strong> are sampling problems</p></li>
<li><p><strong>Distribution shift</strong>: Deployment ≠ training distribution</p></li>
<li><p><strong>Fairness</strong>: If subgroups are undersampled, models underperform for them</p></li>
<li><p><strong>Causal inference</strong>: When can observational data support cause-and-effect claims?</p></li>
</ul>
<aside class="notes">
<p>These are the bridges to later ML material. Each of these could be a full lecture in its own right.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="exercises" class="title-slide slide level1 center">
<h1>Exercises</h1>

</section>
<section id="team-exercise-1-observational-studies-at-work" class="slide level2">
<h2>Team Exercise 1: Observational Studies at Work</h2>
<p>Break into teams:</p>
<ol type="1">
<li>Identify 2–3 examples of observational studies in your work context.</li>
<li>Which would be most valuable? What questions would they answer?</li>
<li>What are the potential pitfalls (confounding, selection bias, etc.)?</li>
<li>Could any be converted to experiments? At what cost?</li>
</ol>
</section>
<section id="team-exercise-2-the-quiz-puzzle" class="slide level2">
<h2>Team Exercise 2: The Quiz Puzzle</h2>
<p>A TA gives a 10-question quiz. After grading:</p>
<ul>
<li>Average number right: 6.4, SD: 2.0</li>
<li>Average number wrong: [?], SD: [?]</li>
</ul>
<p>Fill in the blanks—or do you need the raw data? Explain briefly.</p>
</section>
<section id="team-exercise-3-left-handedness-puzzle" class="slide level2">
<h2>Team Exercise 3: Left-Handedness Puzzle</h2>
<p>In a large health survey, the percentage of left-handed respondents decreased from 10% at age 20 to 4% at age 70.</p>
<p>“The data show that many people change from left-handed to right-handed as they get older.”</p>
<ol type="1">
<li>True or false? Explain.</li>
<li>If false, what explains the pattern?</li>
<li>What study design would test your alternative hypothesis?</li>
</ol>
</section>
<section id="team-exercise-4-normal-distribution" class="slide level2">
<h2>Team Exercise 4: Normal Distribution</h2>
<p>The 25th percentile of height is 62.2 inches; the 75th is 65.8 inches. If the distribution is normal, find the 90th percentile.</p>
<aside class="notes">
<p>Exercise 1 grounds concepts in participants’ experience. Exercises 2–3 are from FPP and test reasoning about study design. Exercise 4 refreshes familiarity with the normal (Gaussian) distribution.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="discussion-questions" class="slide level2">
<h2>Discussion Questions</h2>
<ol type="1">
<li><p>What modern datasets might have Literary Digest-style selection bias?</p></li>
<li><p>When is a randomized experiment unethical or impractical?</p></li>
<li><p>How would you detect distribution shift between training and deployment?</p></li>
</ol>
<aside class="notes">
<p>These are the FPP exercises from the chapter. They reinforce the core concepts and can be used as in-class activities or homework.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="appendix-instructor-notes" class="title-slide slide level1 center" data-visibility="uncounted">
<h1>Appendix: Instructor Notes</h1>

</section>
<section id="timing-guide" class="slide level2" data-visibility="uncounted">
<h2>Timing Guide</h2>
<table class="caption-top">
<thead>
<tr class="header">
<th>Section</th>
<th>Slides</th>
<th>Suggested Time</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Opening</td>
<td>1-2</td>
<td>5 min</td>
</tr>
<tr class="even">
<td>Observational Studies</td>
<td>3-12</td>
<td>25 min</td>
</tr>
<tr class="odd">
<td>Experimental Studies</td>
<td>13-20</td>
<td>20 min</td>
</tr>
<tr class="even">
<td>Measurement/Uncertainty</td>
<td>21-24</td>
<td>15 min</td>
</tr>
<tr class="odd">
<td>Role of EDA</td>
<td>25-26</td>
<td>5 min</td>
</tr>
<tr class="even">
<td>Synthesis</td>
<td>27-32</td>
<td>15 min</td>
</tr>
</tbody>
</table>
<p><strong>Total</strong>: ~85 minutes with discussion</p>
</section>
<section id="customization-options" class="slide level2" data-visibility="uncounted">
<h2>Customization Options</h2>
<p><strong>For shorter sessions</strong> (50 min): Cut slides 8, 12, 24; condense synthesis</p>
<p><strong>For longer sessions</strong>: Expand Simpson’s Paradox with actual department data; add more discussion time</p>
<p><strong>For ML-focused audience</strong>: Expand “ML Connection” callouts with code examples</p>
<p><strong>For statistics-focused audience</strong>: Show the mathematical derivations from FPP</p>
</section>
<section id="data-sources" class="slide level2" data-visibility="uncounted">
<h2>Data Sources</h2>
<p>All FPP datasets are loaded from the <code>eda4mldata</code> package:</p>
<ul>
<li><code>lit_digest</code> — Literary Digest 1936 poll</li>
<li><code>truman_dewey</code> — 1948 election predictions</li>
<li><code>us_elections</code> — Gallup accuracy 1952-2004</li>
<li><code>salk_nfip</code> — Salk vaccine NFIP design</li>
<li><code>salk_blind</code> — Salk vaccine double-blind design</li>
<li><code>portacaval_studies</code> — Portacaval shunt study results</li>
<li><code>portacaval_survival</code> — Shunt survival rates</li>
<li><code>nb10</code> — NB10 weight measurements</li>
</ul>

</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="study-design-slides_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="study-design-slides_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="study-design-slides_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="study-design-slides_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="study-design-slides_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="study-design-slides_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="study-design-slides_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="study-design-slides_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="study-design-slides_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="study-design-slides_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    

    <script>

      // htmlwidgets need to know to resize themselves when slides are shown/hidden.

      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current

      // slide changes (different for each slide format).

      (function () {

        // dispatch for htmlwidgets

        function fireSlideEnter() {

          const event = window.document.createEvent("Event");

          event.initEvent("slideenter", true, true);

          window.document.dispatchEvent(event);

        }

    

        function fireSlideChanged(previousSlide, currentSlide) {

          fireSlideEnter();

    

          // dispatch for shiny

          if (window.jQuery) {

            if (previousSlide) {

              window.jQuery(previousSlide).trigger("hidden");

            }

            if (currentSlide) {

              window.jQuery(currentSlide).trigger("shown");

            }

          }

        }

    

        // hookup for slidy

        if (window.w3c_slidy) {

          window.w3c_slidy.add_observer(function (slide_num) {

            // slide_num starts at position 1

            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);

          });

        }

    

      })();

    </script>

    

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>